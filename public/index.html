<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GridSight™ — PLN Utility Intelligence Dashboard</title>
  <meta name="description" content="Public showcase WebGIS & KPI distribusi listrik berbasis cloud." />
  <link rel="icon" href="logo_pln.png" />

  <style>
    :root{
      --bg:#061c2c;
      --panel:#0d2b42;
      --panel-2:#11354f;
      --text:#eaf6ff;
      --muted:#9ec3d8;
      --brand:#58c4ff;
      --brand-2:#60ffa8;
      --chip:#0b2233;
      --glass:rgba(13,43,66,.55);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, Segoe UI, Roboto, Helvetica, Arial;
      background: radial-gradient(1200px 600px at 15% -10%, #0f3a59 0%, transparent 60%) , var(--bg);
      color:var(--text);
    }
    header{
      position:sticky; top:0; z-index:10;
      backdrop-filter:saturate(1.2) blur(8px);
      background:linear-gradient(180deg, rgba(6,28,44,.95), rgba(6,28,44,.65));
      border-bottom:1px solid rgba(255,255,255,.06);
    }
    .bar{
      max-width:1200px; margin:auto; padding:14px 18px;
      display:flex; align-items:center; gap:12px; justify-content:space-between;
    }
    .brand{display:flex; gap:10px; align-items:center}
    .logo{width:32px; height:32px; border-radius:8px; background:#fff; padding:2px}
    .ttl{font-weight:800; letter-spacing:.3px}
    .sub{font-size:12px; color:var(--muted); margin-top:2px}

    .theme-chip{
      display:inline-flex; gap:8px; align-items:center;
      background:linear-gradient(90deg, rgba(88,196,255,.18), rgba(96,255,168,.18));
      color:#d8f3ff; border:1px solid rgba(255,255,255,.08);
      padding:8px 12px; border-radius:999px; font-weight:700; font-size:13px;
      box-shadow:0 6px 20px rgba(0,0,0,.35) inset, 0 1px 0 rgba(255,255,255,.06);
    }

    .wrap{max-width:1200px; margin:26px auto 60px; padding:0 18px}
    .grid{display:grid; grid-template-columns:1.1fr .9fr; gap:18px}
    .card{
      background:linear-gradient(180deg, var(--panel), var(--panel-2));
      border:1px solid rgba(255,255,255,.06);
      border-radius:14px; overflow:hidden;
      box-shadow: 0 12px 30px rgba(0,0,0,.35);
    }
    .hero{
      aspect-ratio: 16/12; width:100%;
      object-fit:cover; display:block;
      filter:saturate(1.05) contrast(1.02);
    }

    .right{padding:20px}
    .badge{font-weight:900; letter-spacing:.16em; font-size:12px; color:#a6e7ff}
    h1{margin:.25rem 0 10px 0; line-height:1.08}
    .muted{color:var(--muted); margin-bottom:12px}

    .kpis{display:grid; grid-template-columns:repeat(3,1fr); gap:10px; margin:12px 0}
    .kpi{background:var(--glass); border:1px solid rgba(255,255,255,.06); border-radius:12px; padding:14px}
    .kpi .label{font-size:12px; color:#a8c8da; margin-bottom:6px}
    .kpi .val{font-size:32px; font-weight:900; letter-spacing:.3px}

    .note{color:#a8c8da; font-size:13px; border-top:1px dashed rgba(255,255,255,.12); padding-top:10px}

    .globe-card{margin-top:14px; border-radius:12px; background:linear-gradient(180deg, #0e2b43, #0a2133); border:1px solid rgba(255,255,255,.06); overflow:hidden}
    .globe-head{padding:12px 14px; border-bottom:1px solid rgba(255,255,255,.06); display:flex; align-items:center; justify-content:space-between}
    .globe-title{font-weight:800}
    .globe-slot{height:360px; position:relative}
    #globe{position:absolute; inset:0}
    .globe-fallback{position:absolute; inset:0; display:flex; align-items:center; justify-content:center; color:#97bed3}

    .cta-row{margin-top:14px; display:flex; gap:10px; flex-wrap:wrap}
    .btn{
      appearance:none; border:0; cursor:pointer;
      padding:10px 14px; border-radius:10px; font-weight:700; letter-spacing:.2px;
      background:linear-gradient(90deg, #1a75ff, #00c3a5);
      color:white; box-shadow:0 6px 20px rgba(0,0,0,.25);
      text-decoration:none; display:inline-flex; align-items:center; gap:8px;
    }
    .btn.ghost{
      background:transparent; color:#cfefff;
      border:1px solid rgba(255,255,255,.14);
    }

    footer{margin:26px auto 60px; max-width:1200px; padding:0 18px; color:#9ec3d8}
    footer .credit{display:flex; gap:8px; align-items:center; font-size:13px}
    footer .credit strong{color:#e8fbff}
    .sep{opacity:.35}

    @media (max-width:900px){
      .grid{grid-template-columns:1fr}
      .hero{aspect-ratio:auto; height:340px}
      .kpis{grid-template-columns:1fr}
    }
  </style>
</head>
<body>
  <header>
    <div class="bar">
      <div class="brand">
        <img src="logo_pln.png" class="logo" alt="PLN" />
        <div>
          <div class="ttl">GridSight™</div>
          <div class="sub">PLN Utility Intelligence Dashboard</div>
        </div>
      </div>

      <div class="theme-chip">Hybrid • Modern • Intelligent</div>
    </div>
  </header>

  <main class="wrap">
    <div class="grid">
      <!-- LEFT: Hero -->
      <div class="card">
        <img src="hero_corporate.jpg" class="hero" alt="PLN Corporate Hero"/>
      </div>

      <!-- RIGHT: Copy + KPI + Globe + CTA -->
      <div class="card right">
        <div class="badge">SHOWCASE PUBLIK</div>
        <h1>GridSight™ — PLN Utility<br/>Intelligence Dashboard</h1>
        <div class="muted">Public showcase WebGIS & KPI distribusi listrik berbasis cloud.</div>

        <div class="kpis">
          <div class="kpi">
            <div class="label">Panjang JTM (km)</div>
            <div class="val" id="vJTM">431.27</div>
          </div>
          <div class="kpi">
            <div class="label">Panjang JTR (km)</div>
            <div class="val" id="vJTR">892.77</div>
          </div>
          <div class="kpi">
            <div class="label">Jumlah Pelanggan</div>
            <div class="val" id="vPEL">23,874</div>
          </div>
        </div>

        <div class="note">
          Versi publik — peta & dataset aktif tersedia pada server internal PLN.
        </div>

        <div class="globe-card">
          <div class="globe-head">
            <div class="globe-title">Interactive globe • cyber grid</div>
            <div style="font-size:12px;color:#8fbdd3">render real-time • auto-rotate</div>
          </div>
          <div class="globe-slot">
            <div id="globe" aria-label="interactive globe"></div>
            <div class="globe-fallback" id="globeFallback" hidden>Memuat globe…</div>
          </div>
        </div>

        <div class="cta-row">
          <a class="btn" id="btnMap" target="_blank" rel="noopener">Lihat Map (Demo)</a>
          <a class="btn ghost" href="#" onclick="refreshKPI();return false;">Refresh Data</a>
        </div>
      </div>
    </div>
  </main>

  <footer>
    <div class="credit">
      <span>© 2025 GridSight™</span> <span class="sep">•</span>
      <span>Powered by PLN Intelligence</span> <span class="sep">•</span>
      <span>Created by <strong>Rega Syahrul</strong></span>
    </div>
  </footer>

  <!-- Globe.gl CDN -->
  <script src="https://unpkg.com/globe.gl@2.34.1/dist/globe.gl.min.js"></script>
  <script>
    // ---- KPI Dummy refresh (tetap statis tapi animatif) ----
    function refreshKPI(){
      const fmt = n => n.toLocaleString('id-ID', {maximumFractionDigits:2});
      // dummy jitter biar terasa "live"
      const jtm = 431.27 + (Math.random()-.5)*0.2;
      const jtr = 892.77 + (Math.random()-.5)*0.3;
      const pel = 23874 + Math.floor((Math.random()-.5)*20);
      document.getElementById('vJTM').textContent = fmt(jtm);
      document.getElementById('vJTR').textContent = fmt(jtr);
      document.getElementById('vPEL').textContent = pel.toLocaleString('id-ID');
    }

    // ---- Button Map (Demo) ----
    (function(){
      const btn = document.getElementById('btnMap');
      // Kalau kamu sudah punya halaman map statis, ganti ke 'map.html'
      const targetURL = 'map.html'; // ganti jika perlu
      btn.href = targetURL;
      btn.addEventListener('click', function(ev){
        // Jika halaman belum ada, cegah 404
        if (targetURL === '#' || targetURL === '' ) {
          ev.preventDefault();
          alert('Demo map belum tersedia pada versi publik.\n(Tetap aman: tidak memuat data internal)');
        }
      });
    })();

    // ---- Globe init & safety ----
    (function initGlobe(){
      const slot = document.getElementById('globe');
      const fallback = document.getElementById('globeFallback');
      try{
        fallback.hidden = false;

        const g = Globe()(slot)
          .width(slot.clientWidth)
          .height(slot.clientHeight)
          .backgroundColor('rgba(0,0,0,0)')
          .globeImageUrl('https://unpkg.com/three-globe/example/img/earth-dark.jpg')
          .bumpImageUrl('https://unpkg.com/three-globe/example/img/earth-topology.png');

        // auto rotate
        g.controls().autoRotate = true;
        g.controls().autoRotateSpeed = 0.45;

        // contoh titik cahaya (sekilas “grid”)
        const pts = [];
        for(let i=0;i<120;i++){
          pts.push({ lat: -11 + Math.random()*20, lng: 105 + Math.random()*20, size: 0.6 + Math.random()*1.4, color: '#58c4ff' });
        }
        g.pointsData(pts).pointAltitude('size').pointColor('color').pointRadius(0.6);

        // responsive
        const onResize = () => {
          const w = slot.clientWidth, h = slot.clientHeight;
          g.width(w); g.height(h);
        };
        new ResizeObserver(onResize).observe(slot);

        fallback.hidden = true;
      }catch(err){
        console.warn('Globe init error:', err);
        fallback.textContent = 'Globe tidak dapat dimuat di browser ini.';
        fallback.hidden = false;
      }
    })();
  </script>
</body>
</html>
